<!DOCTYPE html>
<html>
  <head>
    <title>Outlet REPL</title>
    <link type="text/css" href="index.css" rel="stylesheet" />
    <script type="text/javascript" src="web.js"></script>
    <script type="text/javascript" src="ui.js"></script>
    <script type="text/javascript" src="runtime.js"></script>
    <script type="text/javascript" src="runtime-eval.js"></script>

    <script type="text/javascript" src="test.js"></script>
  </head>
  <body>
    <div class="content">
      <h2>Welcome to the Outlet REPL</h2>
      <p>
        Outlet is a new language to experiment with compiling Lisp to
        other languages like javascript and lua. Read more about
        it <a href="http://jlongster.com/2012/01/04/outlet-my-lisp-to-javascript-experiment.html">here</a>
        and download it <a href="https://github.com/jlongster/outlet">here</a>.
      </p>
      <div class="repl-title">
        Type some outlet below:
        <!-- <div class="lang"> -->
        <!--   Target: -->
        <!--   <select name="lang" id="lang"> -->
        <!--     <option value="js">js</option> -->
        <!--     <option value="lua">lua</option> -->
        <!--   </select> -->
        <!-- </div> -->
      </div>
      <div class="input">
        <textarea id="src" rows="10" cols="50"></textarea>
      </div>
      <div class="run"><input type="submit" value="Run" onclick="compile();" /></div>
      <h4>result</h4>
      <div id="result"></div>
      <h4>output</h4>
      <div id="output"></div>
      <h4>generated</h4>
      <div id="generated"></div>
      <h2>Examples</h2>
      <pre>
(define foo 5)

(define (bar x)
  (+ x 1))

(define (buz x)
  (let ((y x)
        (add_1 (if (< x 0)
                   (lambda (n) (- n 1))
                   (lambda (n) (+ n 1)))))
    (add_1 y)))

(define (fib n)
  (if (= n 0)
      n
      (+ n (fib (- n 1)))))

(define (Y func)
  ((lambda (f) (f f))
   (lambda (f)
     (func f))))

(for-each
 (lambda (x) (display x))
 '(1 2 3 4))

(define (print-n n)
  (cond
   ((> n 0) (display "positive"))
   ((< n 0) (display "negative"))
   ((= n 0) (display "0"))
   (else (display "wait, what?"))))

;; macros

(define-macro (helper form)
  `(,(car form) (< ,(car (cdr form)) 5)
       (+ ,(car (cdr form))
          ,(car (cdr (cdr form))))))

(define (bar n)
  (pp n))

(define (foo)
  (helper (if 1 2)))

(define-macro (when cond . body)
  `(if ,cond
       (begin
         ,@body)))

;; rest parameters

(define (baz one two . three)
  (pp three))

(baz "a" "b" "c" "d" "e" "f")

;; eval

(pp (eval_outlet '(baz 1 2 3 4)))

;; ->string

(display (->string '(foo 2 bar 4 "hel\nlo\"fdfsf")))
</pre>
    </div>
  </body>
</html>

